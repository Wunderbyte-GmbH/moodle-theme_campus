// Campus custom.

// Theme background.
body {
    background-color: $themeBackground;
}

#region-main {
    background-color: $contentColor;
    #campusCarousel.carousel {
        background-color: darken($contentColor, 20%);
    }
}

#region-main-campus div[role="main"] {
    padding-left: 8px;
    padding-right: 8px;
}

#page-content {
    padding-top: 8px;
}

// Body.
@media (max-width: 767px) {
    body {
        padding-left: 0;
        padding-right: 0;
    }
}

// Page.
.container-fluid {
    max-width: $pageWidthMaximum;
}

// Anti gravity.
.antiGravity {
    background-color: rgba(red($bodyBackgroundAlt), green($bodyBackgroundAlt), blue($bodyBackgroundAlt), 0.8);
    border-color: $bodyBackgroundAlt;
    border-radius: 1em;
    border-style: solid;
    border-width: 1px;
    bottom: 60px;
    color: $body-color;
    display: none;
    font-size: 32px;
    line-height: 1;
    padding: 10px 10px 6px 10px; 
    position: fixed;
    right: 20px;
    text-align: center; 
    text-decoration: none;
    &:hover {
        border-radius: 1em;
        color: lighten($body-color, 10%);
        text-decoration: none;
    }
    i.fa {
        padding-bottom: 2px;
    }
}

// Goto bottom and context menu.
.nav-item.context-menu,
.nav-item.gotoBottom {
    padding: 10px 7px 0;
}

.nav-item.context-menu .dropdown-menu {
    margin-top: 14px;
}

// Local login.
body.hidelocallogin .loginbox .loginsub { // See core_renderer::body_attributes().
    display: none;
}

// Login buttons.
.logininfo .btn {
    margin-left: 5px;
}

// Blocks.
.block {
    background-color: $blockBackgroundColour;
    border-width: 0;
    padding-bottom: 0;
    padding-top: 0;
    .fa {
        color: $blockIconColour;
    }
    .block-controls .fa {
        color: $blockHeadingColor;
    }
    .header {
        background-color: $blockHeadingBackgroundColour;
        border-color: $blockBorderColour;
        border-style: $blockBorderStyle;
        border-top-left-radius: $border-radius-lg; // Our changes to .block in 'bootstrapchanges.less'.
        border-top-right-radius: $border-radius-lg;
        padding-bottom: 4px;
        padding-top: 4px; // Hardcoded in bootstrapbase/less/moodle/blocks.less.  Half here because of padding-bottom so looks good.
        .block_action {
            padding: 2px 15px;
        }
    }
    &.hidden .header {
        border-bottom-left-radius: $border-radius-lg;
        border-bottom-right-radius: $border-radius-lg;
    }
    .header {
        border-color: inherit;
        border-style: inherit;
        border-width: $blockHeadingBorderTopWidth $blockHeadingBorderRightWidth $blockHeadingBorderBottomWidth $blockHeadingBorderLeftWidth; // top right bottom left.
    }
    &.hidden .header {
        border-width: $blockHeadingBorderTopWidth $blockHeadingBorderRightWidth $blockHeadingBorderTopWidth $blockHeadingBorderLeftWidth; // top right bottom left.
    }
    .content {
        border-bottom-left-radius: inherit;
        border-bottom-right-radius: inherit;
        border-color: $blockBorderColour;
        border-style: $blockBorderStyle;
        border-width: $blockContentBorderTopWidth $blockContentBorderRightWidth $blockContentBorderBottomWidth $blockContentBorderLeftWidth; // top right bottom left.
    }
    &.block_login .content {
        max-width: none;
    }
}

.block_adminblock .content {
    margin: inherit;
}

.editing .block.invisible {
    background-color: rgba(red($blockBackgroundColour), green($blockBackgroundColour), blue($blockBackgroundColour), 0.4);
}

.block_course_overview .content {
    margin: 0;
}

// Frontpage.
.frontpageheader.absolutelayout {
    margin: 0 auto;
    max-width: $pageWidthMaximum;
    position: relative;
    .campusheadercontainer {
        bottom: 0;
        height: 100%;
        left: 0;
        margin: auto;
        max-height: inherit;
        max-width: $pageWidthMaximum;
        position: relative;
        right: 0;
        top: 0;
        width: 100%;
    }
    .logotitle {
        float: $frontpageLogoPosition;  // Change from flexlayout.
        height: 0;
        margin-top: -$frontpageAbsolutePaddingBottom;  // Change from flexlayout.
        max-height: inherit;
        padding-bottom: $frontpageAbsolutePaddingBottom;
        position: relative;
        width: $frontpageAbsolutePaddingBottom;
        a {
            height: 100%;
            left: 0;
            max-height: inherit;
            position: absolute;
            width: 100%;
            img {
                float: $frontpageLogoPosition;
                height: 100%;
                max-height: inherit;
            }
        }
    }
    .backgroundcontainer {
        height: 0;
        margin: 0;
        max-height: inherit;
        padding-bottom: $frontpageAbsolutePaddingBottom;
        position: relative;
        width: 100%;  // Change from flexlayout.
        img {
            height: 100%;
            left: 0;
            max-height: inherit;
            position: absolute;
            width: 100%;
        }
    }
    .pageheadingheader {
        left: $frontpagePageHeadingHeaderPositionLeft;
        position: absolute;
        right: $frontpagePageHeadingHeaderPositionRight;
        z-index: 1;
    }
}
@media (max-width: 767px) {
    .frontpageheader.absolutelayout {
        padding-left: 0;
        padding-right: 0;
    }
}

.frontpageheader.flexlayout {
    height: $frontpageHeaderHeightDefault;
    margin: 0 auto;
    max-width: $pageWidthMaximum;
    position: relative;
    .campusheadercontainer {
        bottom: 0;
        display: flex;
        height: 100%;
        left: 0;
        margin: auto;
        max-height: inherit;
        max-width: $pageWidthMaximum;
        position: relative;
        right: 0;
        top: 0;
        width: 100%;
    }
    .logotitle {
        float: left;
        height: 0;
        margin: 0;
        max-height: inherit;
        padding-bottom: $frontpageFlexPaddingBottom;
        position: relative;
        width: $frontpageLogoWidth;
        a {
            height: 100%;
            left: 0;
            max-height: inherit;
            position: absolute;
            width: 100%;
            img {
                height: 100%;
                max-height: inherit;
                width: 100%;
            }
        }
    }
    .backgroundcontainer {
        float: left;
        height: 0;
        margin: 0;
        max-height: inherit;
        padding-bottom: $frontpageFlexPaddingBottom;
        position: relative;
        width: $frontpageBackgroundWidth;
        img {
            height: 100%;
            left: 0;
            max-height: inherit;
            position: absolute;
            width: 100%;
        }
    }
    .pageheadingheader {
        left: $frontpagePageHeadingHeaderPositionLeft;
        position: absolute;
        right: $frontpagePageHeadingHeaderPositionRight;
        z-index: 1;
    }
}

@media (max-width: 767px) {
    .frontpageheader.flexlayout {
        padding-left: 0;
        padding-right: 0;
    }
}

@mixin fpresponsiveheaderlogo(
    $frontpageMixinLogoWidth,
    $frontpageAbsoluteMixinPaddingBottom,
    $frontpageFlexMixinPaddingBottom,
    $frontpageMixinBackgroundWidth) {
    // Only called if responsive images exist, so hide them here when showing desktop versions.
    .frontpageheader.absolutelayout,
    .frontpageheader.flexlayout {
        .logotitle {
            .campuslogodesktop {
                display: block;
            }
            .campuslogosmalldevice {
                display: none;
            }
        }
        .backgroundcontainer {
            .campusdesktop {
                display: block;
            }
            .campussmalldevice {
                display: none;
            }
        }
    }
    @media (max-width: $navbarCollapseWidth) {
        .frontpageheader.absolutelayout {
            height: auto;
            .logotitle {
                margin-top: -$frontpageAbsoluteMixinPaddingBottom;
                padding-bottom: $frontpageAbsoluteMixinPaddingBottom;
                width: $frontpageAbsoluteMixinPaddingBottom;
                .campuslogodesktop {
                    display: none;
                }
                .campuslogosmalldevice {
                    display: block;
                }
            }
            .backgroundcontainer {
                padding-bottom: $frontpageAbsoluteMixinPaddingBottom;
                .campusdesktop {
                    display: none;
                }
                .campussmalldevice {
                    display: block;
                }
            }
        }
        .frontpageheader.flexlayout {
            height: auto;
            .logotitle {
                padding-bottom: $frontpageFlexMixinPaddingBottom;
                width: $frontpageMixinLogoWidth;
                .campuslogodesktop {
                    display: none;
                }
                .campuslogosmalldevice {
                    display: block;
                }
            }
            .backgroundcontainer {
                padding-bottom: $frontpageFlexMixinPaddingBottom;
                width: $frontpageMixinBackgroundWidth;
                .campusdesktop {
                    display: none;
                }
                .campussmalldevice {
                    display: block;
                }
            }
        }
    }
}

// Navbar.
.navbar {
    clear: both;
    margin: 0 auto;
    max-width: $pageWidthMaximum;
    padding-left: 20px;
    padding-right: 20px;
    .fa {
        color: $navbarIconColour;
    }
    img.userpicture {
        height: auto;
        max-width: $line-height-base;
        max-height: $line-height-base;
        vertical-align: top;
        width: auto;
    }

    // Navbar brand.
    .brand {
        // Vertically center the text given $navbarHeight.
        //line-height: $line-height-base + 4;
        //margin: ((($navbarHeight - $line-height-base) / 2) - 2) 0 ((($navbarHeight - $line-height-base) / 2) - 2);
        //max-height: $line-height-base + 4;
        max-width: $navbarPageHeadingMax;
        padding: 0 5px 0 5px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }

    // Navbar divider.
    .nav {
        .divider {
            height: $navbarHeight;
        }
        .dropdown-menu .divider {
            height: 1px;
        }
    }

    .navbar {
        padding-left: 10px;
        padding-right: 10px;
        .usermenu {
            .dropdown {
                img.userpicture {
                    border-radius: $border-radius;
                    height: auto;
                    margin-right: 2px;
                    max-height: $line-height-base;
                    max-width: $line-height-base;
                    vertical-align: top;
                    width: auto;
                }
                > a.dropdown-toggle {
                    padding: (($navbarHeight - $line-height-base) / 2) (($navbarHeight - $line-height-base) / 2);
                    .fa {
                        padding-left: 5px;
                    }
                    img {
                        margin-left: 5px;
                    }
                }
                .dropdown-submenu.preferences {
                    a.dropdown-toggle {
                        padding: 3px 20px 3px 8px;
                    }
                }
                ul.dropdown-menu {
                    margin: 0;
                    span {
                        margin-right: 5px;
                        width: 15px;
                    }
                    hr.sep {
                        border: none;
                        height: 0;
                        margin: 0;
                    }
                }
            }
        }
        .usermenu {
            .dropdown {
                ul.dropdown-menu {
                    border: 1px solid $bodyBackgroundAlt;
                    hr.sep {
                        border-bottom: 1px dotted $bodyBackgroundAlt;
                    }
                }
            }
        }
        .logininfo {
            padding: 2px 20px 2px 8px;
        }
        .container-fluid {
            padding-left: 0;
            padding-right: 0;
        }
    }
    &.affix {
        left: 0;
        max-width: none;
        padding-left: 0;
        padding-right: 0;
        top: 0;
        width: 100%;
        z-index: 200;
    }
}

.frontpageheader.flexlayout.fancynavbar,
.coursecategoryheader.flexlayout.fancynavbar {
    .backgroundcontainer .navbar.affix {
        bottom: auto;
        left: 0;
        max-width: none;
        padding-left: 0;
        padding-right: 0;
        position: fixed;
        top: 0;
        width: 100%;
        z-index: 200;
    }
}

@media (max-width: $navbarCollapseWidth) {
    .navbar {
        padding-left: 0;
        padding-right: 0;
        .btn-navbar {
            display: block;
            margin-left: 0;
            margin-right: 0;
        }
    }
    .backgroundcontainer.left .navbar .brand {
        float: right;
        padding-left: 10px;
    }
}

@media (min-width: $navbarCollapseDesktopWidth) {
    .campusnav.collapse:not(.show) {
        display: flex;
    }
}

@media (max-width: 767px) {
    .navbar {
        padding-left: 0;
        padding-right: 0;
    }
}

// Slideshow.
#campusCarousel.carousel {
    padding-bottom: 10px;
    .carousel-inner {
        > .carousel-item {
            .carousel-image-container {
                padding-left: 5%;
                padding-right: 5%;
                text-align: center;
            }
            .carousel-image {
                height: auto;
                margin: 0 auto;
                margin-top: 8px;
                max-height: 300px;
                max-width: 100%;
                vertical-align: middle; // See: http://www.vanseodesign.com/css/vertical-centering/.
                width: auto;
            }
            &.side-caption {
                div.the-side-caption {
                    padding-left: 7%;
                }
            }
            &.side-caption .carousel-image {
                background-color: #fff;
                box-shadow: 0 0 8px #222;
                margin-left: -8px;
                padding: 8px;
            }
        }
        a,
        a:hover,
        a:active {
            height: 100%;
            text-decoration: none;
        }
        // Caption for text below images.
        .carousel-caption {
            border-radius: $border-radius + 2;
            text-align: left;
            .carousel-caption-inner {
                margin: 0 auto;
            }
            h4,
            p {
                padding: 0 20px;
            }
            p {
                line-height: 1;
            }
        }
        &.centred {
            .carousel-caption {
                text-align: center;
            }
        }
    }
    // Left/right controls for nav.
    .carousel-control {
        background: none;
        border: 0;
        cursor: pointer;
        display: none; // Shown when carousel hovered on, see below.
        font-size: 30px;
        top: 40%;
        &:hover,
            &:focus {
            background: none;
            border: 0;
        }
    }
    &:hover .carousel-control{
        display: block;
    }
    .carousel-indicators {
        background-color: #fff;
        background-color: rgba(255, 255, 255, .50);
        border-radius: $border-radius;
        bottom: auto;
        left: auto;
        padding-bottom: 2px;
        padding-right: 1px;
        padding-top: 2px;
        right: 5px;
        top: 15px;
    }

    // Responsive.
    // $screen-xs-min.
    @media(min-width: 480px) {
        .carousel-control {
            font-size: 36px;
            height: 36px;
            width: 36px;
        }
    }
    @media (max-width: 767px) {
        .carousel-inner {
            > .carousel-item {
                height: 200px;
                .carousel-image-container {
                    line-height: 200px; // See: http://www.vanseodesign.com/css/vertical-centering/.
                }
                .carousel-image {
                    max-height: 165px;
                }
                .carousel-caption {
                    position: absolute;
                    h4 {
                        font-size: 1.2em;
                    }
                }
            }
        }
    }

    // $screen-sm-min.
    @media(min-width: 768px) {
        .carousel-inner {
            > .carousel-item {
                height: 260px;
                .carousel-image-container {
                    line-height: 260px;
                }
                .carousel-image {
                    max-height: 225px;
                }
            }
        }
        .carousel-control {
            font-size: 40px;
            height: 40px;
            width: 40px;
        }
    }
    @media (min-width: 768px) and (max-width: 979px) {
        .carousel-inner {
            > .carousel-item {
                .carousel-caption {
                    h4 {
                        font-size: 1.2em;
                    }
                }
            }
        }
    }

    // $screen-md-min.
    @media(min-width: 992px) {
        .carousel-inner {
            > .carousel-item {
                height: 328px;
                .carousel-image-container {
                    line-height: 328px;
                }
                .carousel-image {
                    max-height: 293px;
                }
            }
        }
        .carousel-control {
            font-size: 50px;
            height: 50px;
            width: 50px;
        }
    }

    // $screen-lg-min.
    @media(min-width: 1200px) {
        .carousel-inner {
            > .carousel-item {
                height: 368px;
                .carousel-image-container {
                    line-height: 368px;
                }
                .carousel-image {
                    max-height: 333px;
                }
            }
        }
        .carousel-control {
            font-size: 60px;
            height: 60px;
            width: 60px;
        }
    }
}

// Slider settings.
#campusCarousel.carousel {
    .carousel-inner {
        // Caption for text below images.
        .carousel-caption {
            background-color: rgba(red($carouselColour), green($carouselColour), blue($carouselColour), 0.75); // Same as theme colour.
            .carousel-caption-inner {
                max-width: $pageWidthMaximum;
            }
            h4,
            p {
                color: $carouselTextColour;
            }
        }
    }
    // Left/right controls for nav.
    .carousel-control {
        color: $slideButtonColour;
        &:hover,
        &:focus {
            color: $slideButtonHoverColour;
        }
    }

    // Carousel indicator pips.
    .carousel-indicators {
        box-shadow: 0 0 8px $carouselColour;
        li {
            background-color: $carouselColour;
        }
        .active {
            background-color: lighten($carouselActiveColour, 5%);  // Same as theme colour.
        }
    }
}

// Course category header.
.coursecategoryheader.absolutelayout {
    height: $courseCategoryHeaderHeightDefault;
    padding-left: 20px;
    padding-right: 20px;
    position: relative;
    margin: 0 auto;
    max-width: $pageWidthMaximum;
    .campusheadercontainer {
        bottom: 0;
        left: 0;
        height: 100%;
        margin: auto;
        max-height: inherit;
        max-width: $pageWidthMaximum;
        position: relative;
        right: 0;
        top: 0;
        width: 100%;
    }
    .logotitle {
        float: $courseCategoryLogoPosition;  // Change from flexlayout.
        height: 0;
        max-height: inherit;
        padding-bottom: $courseCategoryPaddingBottomDefault;
        position: relative;
        margin-top: -$courseCategoryPaddingBottomDefault;  // Change from flexlayout.
        width: $courseCategoryLogoWidthDefault;
        a {
            height: 100%;
            left: 0;
            max-height: inherit;
            position: absolute;
            width: 100%;
            img {
                height: 100%;
                max-height: inherit;
            }
        }
    }
    .backgroundcontainer {
        float: left;
        height: 0;
        margin: 0;
        max-height: inherit;
        padding-bottom: $courseCategoryPaddingBottomDefault;
        position: relative;
        width: 100%;  // Change from flexlayout.
        img {
            height: 100%;
            left: 0;
            max-height: inherit;
            position: absolute;
            width: 100%;
        }
    }
    .pageheadingheader {
        left: $courseCategoryPageHeadingHeaderPositionLeftDefault;
        position: absolute;
        right: $courseCategoryPageHeadingHeaderPositionRightDefault;
        z-index: 1;
    }
}

@media (max-width: 767px) {
    .coursecategoryheader.absolutelayout {
        padding-left: 0;
        padding-right: 0;
    }
}

.coursecategoryheader.flexlayout {
    height: $courseCategoryHeaderHeightDefault;
    margin: 0 auto;
    max-width: $pageWidthMaximum;
    padding-left: 20px;
    padding-right: 20px;
    position: relative;
    .campusheadercontainer {
        bottom: 0;
        height: 100%;
        left: 0;
        margin: auto;
        max-height: inherit;
        max-width: $pageWidthMaximum;
        position: relative;
        right: 0;
        top: 0;
        width: 100%;
    }
    .logotitle {
        float: left;
        height: 0;
        margin: 0;
        max-height: inherit;
        padding-bottom: $courseCategoryPaddingBottomDefault;
        position: relative;
        width: $courseCategoryLogoWidthDefault;
        a {
            height: 100%;
            left: 0;
            position: absolute;
            max-height: inherit;
            width: 100%;
            img {
                height: 100%;
                max-height: inherit;
                width: 100%;
            }
        }
    }
    .backgroundcontainer {
        float: left;
        height: 0;
        margin: 0;
        max-height: inherit;
        padding-bottom: $courseCategoryPaddingBottomDefault;
        position: relative;
        width: $courseCategoryBackgroundWidthDefault;
        img {
            height: 100%;
            left: 0;
            max-height: inherit;
            position: absolute;
            width: 100%;
        }
    }
    .pageheadingheader {
        left: $courseCategoryPageHeadingHeaderPositionLeftDefault;
        position: absolute;
        right: $courseCategoryPageHeadingHeaderPositionRightDefault;
        z-index: 1;
    }
}

@media (max-width: 767px) {
    .coursecategoryheader.flexlayout {
        padding-left: 0;
        padding-right: 0;
    }
}

// Course category header parametric mixins.
@mixin ccheaderlogo(
    $courseCategoryKey,
    $courseCategoryMixinLogoWidth,
    $courseCategoryMixinAbsolutePaddingBottom,
    $courseCategoryMixinFlexPaddingBottom,
    $courseCategoryMixinBackgroundWidth) {
    .coursecategoryheader.absolutelayout.category#{$courseCategoryKey} {
        height: auto;
        .logotitle {
            margin-top: -$courseCategoryMixinAbsolutePaddingBottom;  // Change from flexlayout.
            padding-bottom: $courseCategoryMixinAbsolutePaddingBottom;
            width: $courseCategoryMixinAbsolutePaddingBottom;
        }
        .backgroundcontainer {
            // No width change - a change from flexlayout.
            padding-bottom: $courseCategoryMixinAbsolutePaddingBottom;
        }
    }
    .coursecategoryheader.flexlayout.category#{$courseCategoryKey} {
        height: auto;
        .logotitle {
            padding-bottom: $courseCategoryMixinFlexPaddingBottom;
            width: $courseCategoryMixinLogoWidth;
        }
        .backgroundcontainer {
            padding-bottom: $courseCategoryMixinFlexPaddingBottom;
            width: $courseCategoryMixinBackgroundWidth;
        }
    }
}

@mixin ccheaderlogoposition(
    $courseCategoryKey,
    $courseCategoryMixinLogoPosition,
    $courseCategoryMixinPageHeadingHeaderPositionLeft,
    $courseCategoryMixinPageHeadingHeaderPositionRight) {
    .coursecategoryheader.absolutelayout.category#{$courseCategoryKey},
    .coursecategoryheader.flexlayout.category#{$courseCategoryKey} {
        .pageheadingheader {
            left: $courseCategoryMixinPageHeadingHeaderPositionLeft;
            right: $courseCategoryMixinPageHeadingHeaderPositionRight;
        }
    }
    .coursecategoryheader.absolutelayout.category#{$courseCategoryKey} {
        .logotitle {
            float: $courseCategoryMixinLogoPosition;  // Change from flexlayout.
        }
    }
}

@mixin ccheaderbackgroundcolour(
    $courseCategoryKey,
    $courseCategoryMixinBackgroundColour) {
    .coursecategoryheader.category#{$courseCategoryKey} {
        background-clip: content-box;
        background-color: $courseCategoryMixinBackgroundColour;
    }
    body.hideheader {
        .coursecategoryheader.category#{$courseCategoryKey} {
            background-color: transparent;
        }
    }
}

@mixin ccresponsiveheaderlogo(
    $courseCategoryKey,
    $courseCategoryMixinLogoWidth,
    $courseCategoryMixinAbsolutePaddingBottom,
    $courseCategoryMixinFlexPaddingBottom,
    $courseCategoryMixinBackgroundWidth) {
    // Only called if responsive images exist, so hide them here when showing desktop versions.
    .coursecategoryheader.absolutelayout.category#{$courseCategoryKey},
    .coursecategoryheader.flexlayout.category#{$courseCategoryKey} {
        .logotitle {
            .campuslogodesktop {
                display: block;
            }
            .campuslogosmalldevice {
                display: none;
            }
        }
        .backgroundcontainer {
            .campusdesktop {
                display: block;
            }
            .campussmalldevice {
                display: none;
            }
        }
    }
    @media (max-width: $navbarCollapseWidth) {
        .coursecategoryheader.absolutelayout.category#{$courseCategoryKey} {
            height: auto;
            .logotitle {
                margin-top: -$courseCategoryMixinAbsolutePaddingBottom;  // Change from flexlayout.
                padding-bottom: $courseCategoryMixinAbsolutePaddingBottom;
                width: $courseCategoryMixinAbsolutePaddingBottom;
                .campuslogodesktop {
                    display: none;
                }
                .campuslogosmalldevice {
                    display: block;
                }
            }
            .backgroundcontainer {
                padding-bottom: $courseCategoryMixinAbsolutePaddingBottom;
                .campusdesktop {
                    display: none;
                }
                .campussmalldevice {
                    display: block;
                }
            }
        }
        .coursecategoryheader.flexlayout.category#{$courseCategoryKey} {
            height: auto;
            .logotitle {
                width: $courseCategoryMixinLogoWidth;
                padding-bottom: $courseCategoryMixinFlexPaddingBottom;
                .campuslogodesktop {
                    display: none;
                }
                .campuslogosmalldevice {
                    display: block;
                }
            }
            .backgroundcontainer {
                width: $courseCategoryMixinBackgroundWidth;
                padding-bottom: $courseCategoryMixinFlexPaddingBottom;
                .campusdesktop {
                    display: none;
                }
                .campussmalldevice {
                    display: block;
                }
            }
        }
    }
}

// Page heading in the header styling.
.pageheadingheader {
    h1 {
        color: transparent;
        text-shadow: rgba(245,245,255,0.6) 0 0 0, rgba(0,0,30,0.3) 0 0.04em 0.02em;
        text-transform: uppercase;
        -webkit-text-stroke: 6px rgba(255,255,255,0.05);
    }
}

// Fancy navbar.
.frontpageheader.flexlayout.fancynavbar,
.coursecategoryheader.flexlayout.fancynavbar {
    .backgroundcontainer {
        .navbar {
            bottom: 0;
            padding-left: 0;
            padding-right: 0;
            position: absolute;
            width: 100%;
            z-index: 2;
            .navbar-inner {
                border-width: 0;
                @include gradient-y(rgba(red($navbarBackgroundHighlight), green($navbarBackgroundHighlight), blue($navbarBackgroundHighlight), 0.75), rgba(red($navbarBackground), green($navbarBackground), blue($navbarBackground), 0.75));
           }
        }
        &.left .navbar .navbar-inner .btn-navbar.active {
            float: left;
        }
    }
}

@media (max-width: $navbarCollapseWidth) {
    .frontpageheader.flexlayout.fancynavbar,
    .coursecategoryheader.flexlayout.fancynavbar {
        .backgroundcontainer .navbar {
            bottom: auto;
        }
        .pageheadingheader {
            bottom: 0;
        }
    }
}

@media (max-width: $navbarCollapseWidth) {
    .frontpageheader.flexlayout,
    .coursecategoryheader.flexlayout {
        &.fancynavbar .backgroundcontainer .navbar {
            display: inline-table;
            width: auto;
            .nav-collapse.collapse {
                display: none;
            }
            .nav-collapse.collapse.active {
                display: block;
            }
            .navbar {
                background-image: none;
                background-color: transparent;
                @include box-shadow(none);
                .nav-collapse.active {
                    box-shadow: 0 1px 10px rgba(0, 0, 0, .1);
                    @include gradient-y(rgba(red($navbarBackgroundHighlight), green($navbarBackgroundHighlight), blue($navbarBackgroundHighlight), 0.75), rgba(red($navbarBackground), green($navbarBackground), blue($navbarBackground), 0.75));
                }
            }
        }
        &.fancynavbar .backgroundcontainer.left .navbar {
            left: 0;
            right: auto;
        }
        &.fancynavbar .backgroundcontainer.right .navbar {
            left: auto;
            right: 0;
        }
    }
}

// Page heading in header.
.frontpageheader.absolutelayout,
.frontpageheader.flexlayout,
.coursecategoryheader.absolutelayout,
.coursecategoryheader.flexlayout {
    .pageheadingheader {
        top: 0.5vw;
    }
}

@media (max-width: $navbarCollapseWidth) {
    .frontpageheader.absolutelayout,
    .frontpageheader.flexlayout,
    .coursecategoryheader.absolutelayout,
    .coursecategoryheader.flexlayout {
        .pageheadingheader {
            top: 5px;
            h1 {
                font-size: 28px;
                line-height: 28px;
                margin-bottom: 0;
                margin-top: 0;
            }
        }
    }
}

@media (max-width: 540px) {
    .frontpageheader.absolutelayout,
    .frontpageheader.flexlayout,
    .coursecategoryheader.absolutelayout,
    .coursecategoryheader.flexlayout {
        .pageheadingheader {
            h1 {
                font-size: 24px;
                line-height: 24px;
                margin-bottom: 0;
                margin-top: 0;
            }
        }
    }
}

// Navbar.
.navbar .nav.pull-right {
    margin: 0;
    .usermenu {
        margin: -15px 10px 0;
    }
}

// No fancy navbar on < $navbarCollapseWidth.
@mixin headertogglemenuhidenofancy($screenWidth) {
    @media (min-width: $navbarCollapseDesktopWidth) and (max-width: $screenWidth) {
        body.hideheader {
            > header.iamfancy {
                display: none;
            }
        }
    }
}
@media (max-width: $navbarCollapseWidth) {
    #body-header header.iamfancy {
        display: none;
    }
    body.hideheader > header.iamfancy {
        display: block;
    }
}
@media (min-width: $navbarCollapseDesktopWidth) {
    body {
        > header.iamfancy {
            display: none;
        }
    }
}

// Responsive.
//@media (max-width: 767px) {
//    aside.block-region {
//        margin-top: 20px;
//    }
//}

// Header toggle.
.navbar .nav.headertogglemenu {
    margin: 0;
    cursor: pointer;
    a {
        color: $navbarText;
        padding: 8px 15px 0;
        text-shadow: none;
        span {
            font-size: 20px;
        }
    }
}

@mixin headertogglesetup($screenWidth) {
    @media (min-width: $screenWidth) {
        body.hideheader {
            .frontpageheader.flexlayout,
            .coursecategoryheader.flexlayout {
                .backgroundcontainer {
                    padding-bottom: 0;
                    width: 100%;
                }
            }
            .frontpageheader.absolutelayout,
            .coursecategoryheader.absolutelayout {
                .backgroundcontainer {
                    padding-bottom: 0;
                }
            }
            .frontpageheader.flexlayout.fancynavbar,
            .coursecategoryheader.flexlayout.fancynavbar {
                .backgroundcontainer {
                    .navbar.campusnavbar {
                        position: static;
                    }
                }
            }
            .fancynavbar .campusnavbar {
                &.affix-top {
                    left: 0;
                    padding-left: 0;
                    padding-right: 0;
                    position: absolute;
                    top: 0;
                    width: 100%;
                }
                &.affix {
                    position: fixed;
                }
            }
            #body-header.fancynavbar {
                padding-bottom: 30px;
            }
            #body-header.fancynavbar,
            .campusnavbar {
                padding-left: 0;
                padding-right: 0;
            }
            .navbar,
            .navbar .container-fluid,
            #page, 
            .frontpageheader.absolutelayout,
            .frontpageheader.flexlayout,
            .frontpageheader.flexlayout .campusheadercontainer,
            .coursecategoryheader.absolutelayout,
            .coursecategoryheader.flexlayout,
            .coursecategoryheader.flexlayout .campusheadercontainer {
                max-width: 100%;
            }
            #region-main,
            #region-bs-main-and-pre,
            #region-bs-main-and-post,
            aside.block-region {
                width: 100%;
            }
            aside.block-region {
                margin-left: 0;
                margin-top: 20px;
            }
        }
    }
}

@mixin headertogglemenuhide($screenWidth) {
    @media (max-width: $screenWidth) {
        .navbar .nav.headertogglemenu {
            display: none;
        }
        body.hideheader {
            .logotitle,
            .campusdesktop,
            .pageheadingheader {
                display: block !important; // Override jQuery!
            }
        }
    }
}

// Header goto bottom, navbar plugins and search.
.navbar .nav {
    &.gotoBottom, .popover-region-toggle, .search-input-wrapper {
        cursor: pointer;
        .fa {
            color: $navbarText;
        }
    }
}

// Footer.
#page-footer {
    background-color: $contentColor;
    padding-top: 1em;
    a {
        color: $link-color;
    }
    .helplink, .logininfo, {
        display: inline;
    }
    .helplink {
        float: left;
    }
    .logininfo {
        float: right;
        .loggedintext {
            margin-right: 10px;
        }
        div {
            display: inline;
        }
    }
    .helplink, .performanceinfo {
        margin: 0;
    }
}

// Remove text shadow from navbar, block headings and buttons - task 390.
.navbar .nav > li > a,
.block .header .title h2,
.block h3.main, .btn, .breadcrumb > li {
    text-shadow: none;
}

// Forum.
.path-mod-forum .indent {
    margin-left: 15px;
}

.path-mod-forum table.forumheaderlist {
    border: 0 solid transparent;
    border-collapse: collapse;
    color: darken($navbarText, 15%);
    margin-bottom: 10px;

    a {
        color: $navbarText;
    }
    tr:nth-child(odd) > td a {
        color: darken($navbarText, 15%);
    }

    thead, tbody {
        box-shadow: 1px 2px 3px $grayLightish;
    }
    thead {
        background-color: $table-accent-bg;
        text-transform: uppercase;
    }
    th {
        padding: 5px 4px;
    }
    .forumblank {
        height: 8px;
    }
    tbody {
        tr {
            border: 0 solid transparent;
        }
    }
    td {
        padding: 5px 4px;
    }
}

.forumpost {
    background-color: transparent;
    border: 0 solid transparent;
    box-shadow: none;
    .row {
        &.header {
            background-color: $forumHeaderBackgroundColour;
            border: 1px solid $forumHeaderBorderColour;

            color: $forumHeaderTextColour;

            margin-bottom: 8px;
            min-height: 43px;
            a {
                color: $forumHeaderLinkColour;
            }

        }
        .topic,
        &.maincontent,
        &.header {
            padding: 5px 4px;
        }
        &.header,
        &.maincontent {
            box-shadow: 1px 2px 3px $grayLightish;
            width: auto;
            border-radius: $border-radius;
        }
        &.side {
            padding-top: 10px;
        }
    }
}

// Social icons.
#page-footer {
    ul.socialnetworks {
        background-color: rgba(red($bodyBackgroundAlt), green($bodyBackgroundAlt), blue($bodyBackgroundAlt), 0.2);
        border-color: $bodyBackgroundAlt;
        border-radius: $border-radius;
        box-shadow: 0 1px 1px rgba(0, 0, 0, 0.5);
        display: inline-block;
        margin-left: 0;
        padding: 4px;
        li {
            display: inline;
            margin-left: 2px;
            margin-right: 2px;
        }
        a {
            color: #1F4D87;
            &:hover {
                background-color: transparent;
                color: #2B6EBF;
            }
        }
    }
}

/* Specific icon colours.... */
#page-footer .socialnetworks a {
    .fa-dropbox {
        color: #007EE5;
    }
    .fa-facebook-square {
        color: #4862A3;
    }
    .fa-github {
        color: #000;
    }
    .fa-google-plus-square {
        color: #DD4B39;
    }
    .fa-linkedin-square {
        color: #007ABB;
    }
    .fa-pinterest-square {
        color: #D73532;
    }
    .fa-skype {
        color: #01AEF2;
    }
    .fa-tumblr-square {
        color: #3B5876;
    }
    .fa-twitter-square {
        color: #55acee;
    }
    .fa-vimeo-square {
        color: #20B9EB;
    }
    .fa-vk {
        color: #44678D;
    }
    .fa-youtube-square {
        color: #E12C27;
    }
    &:hover {
        .fa-dropbox {
            color: #0090FF;
        }
        .fa-facebook-square {
            color: #668BE2;
        }
        .fa-github {
            color: #707070;
        }
        .fa-google-plus-square {
            color: #FF5542;
        }
        .fa-linkedin-square {
            color: #0097E2;
        }
        .fa-pinterest-square {
            color: #EF3C39;
        }
        .fa-skype {
            color: #02BBFF;
        }
        .fa-tumblr-square {
            color: #547EA8;
        }
        .fa-twitter-square {
            color: #5BBBFF;
        }
        .fa-vimeo-square {
            color: #23CFFF;
        }
        .fa-vk {
            color: #5E8EC1;
        }
        .fa-youtube-square {
            color: #FF2D2D;
        }
    }
}

// Quit: Make the "Submit quiz" button sticky to always be visible - task 916.
#page-mod-quiz-summary .singlebutton form[action$="processattempt.php"] div {
    background-color: $input-bg;
    border-color: $input-border-color;
    border-radius: $input-border-radius;
    border-style: solid;
    border-width: 2px;
    bottom: 30px;
    left: 50%;
    padding: 5px;
    position: fixed;
    margin: 0;
    z-index: 4;
    input[type="submit"] {
        margin: 5px;
    }
}

// Attempt to solve overflowing table issue: https://moodle.org/mod/forum/discuss.php?d=279883 - related to:
// https://moodle.org/mod/forum/discuss.php?d=274915 - which might be too - code comes from:
// https://github.com/gjb2048/moodle-theme_shoehorn/issues/5
table {
    th:first-child, td:first-child {
        word-break: break-word;
        word-wrap: break-word;
    }
}

table.flexible,
.generaltable {
    //max-width: 100%; // Add in when move to BS3.
}

body.path-grade-report,
body#page-admin-plugins {  // Task 682.
    table {
        th, td {
            word-break: normal;  // Note: Compromise solution until Moodle core uses div's instead of tables.
            word-wrap: normal;
        }
    }
}

fieldset {
    min-width: 0;
}

// Horizontal blocks
.hblocks.editing .card {
    margin: 0 15px;
}

.hblocks.editing.bpr-1 .card {
    width: calc(100% - 30px);
}
.hblocks.editing.bpr-2 .card {
    width: calc(50% - 30px);
}
.hblocks.editing.bpr-3 .card {
    width: calc(33.3333333333% - 30px);
}
.hblocks.editing.bpr-4 .card {
    width: calc(25% - 30px);
}
.hblocks.editing.bpr-6 .card {
    width: calc(16.6666666667% - 30px);
}

.hblocks-container {
    display: flex;
    justify-content: space-between;
}
.hblocks-container.editing {
    flex-wrap: wrap;
    justify-content: space-evenly;
}

.hblocks-col {
    margin-right: 15px;
    &:last-of-type {
        margin-right: 0;
    }
}

.hblocks-col-1 {
    flex-basis: 100%;
}
.hblocks-col-2 {
    flex-basis: 50%;
}
.hblocks-col-3 {
    flex-basis: 33%;
}
.hblocks-col-4 {
    flex-basis: 25%;
}
.hblocks-col-6 {
    flex-basis: 16.6666666667%;
}

/* In-course settings. */
#campus-course-settings,
#campus-activity-settings {
    border: none;
    /* Initially do not display the settings. Visibility will be changed on click with course_settings_incourse.mustache. */
    display: none;
    margin-bottom: 1rem;
    padding: 0 1rem 1.3rem 1rem;

    .nav-tabs {
        border: none;
        .active {
            background-color: darken($body-bg, 5%);
            border-color: darken($body-bg, 5%);
        }
    }
    /* Improve color of tab content so it looks more like a real tab. */
    .tab-content .card {
        background-color: darken($body-bg, 5%);
        border: none;
    }
}

/* As this is already placed within the activity content card, the border around the settings card should be removed. */
#campus-activity-settings {
    border: none;
}

/* If showsettingsincourse is enabled, we have to style the cog icon a bit different. */
@if variable-exists(showSettingsIncourse) {
    @if $showSettingsIncourse == 'yes' {
        #page-header {
            /* If the setting is enabled we do not need the triangle icon, because there is no menu
             * popping up next to the cog icon. */
            .context-header-settings-menu .dropdown-toggle::after {
                display: none;
            }
        }
        /* We do not show the cog icon on the participants page as the settings on this page are
         * duplicated with the in-course course menu. */
        .path-user #region-main-settings-menu {
            display: none;
        }
        /* Hide the triangle down icon. */
        #region-main-settings-menu .dropdown-toggle::after {
            display: none;
        }
    }
}

/* Setting to move 'Switch role to...' menu item to the course settings - but only if
   setting showsettingsincourse is also enabled. */
@if (variable-exists(incourseSettingsSwitchToRolePosition) and variable-exists(showSettingsIncourse)) {
    @if ($incourseSettingsSwitchToRolePosition == 'yes' and $showSettingsIncourse == 'yes') {
        /* Hide the switch role to menu item within the user menu */
        .usermenu {
            .dropdown-menu .dropdown-item.switchroleto {
                display: none;
            }
            /* As the last menu item is missing, we have to modify the dropdown menu container. */
            .dropdown-menu.dropdown-menu-right {
                padding-bottom: 0;
                border-bottom: none;
            }
            /* We have to add a border for the users who do not have a switch role menu item due to their capabilities. */
            .dropdown-menu.dropdown-menu-right a:last-child {
                border-bottom: 1px solid $gray-lighter;
            }
            .dropdown-menu-right div:last-of-type {
                margin-bottom: 0;
            }
        }
    }
}
