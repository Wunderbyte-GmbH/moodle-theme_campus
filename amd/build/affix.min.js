define(["jquery","core/log"],function(a,b){"use strict";b.debug("Campus affix AMD");var c=function(b,c){this.options=a.extend({},a.fn.affix.defaults,c),this.$window=a(window).on("scroll.affix.data-api",a.proxy(this.checkPosition,this)).on("click.affix.data-api",a.proxy(function(){setTimeout(a.proxy(this.checkPosition,this),1)},this)),this.$element=a(b),this.checkPosition()};c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b,c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.bottom,h=f.top,i="affix affix-top affix-bottom";"object"!=typeof f&&(g=h=f),"function"==typeof h&&(h=f.top()),"function"==typeof g&&(g=f.bottom()),b=!(null!=this.unpin&&d+this.unpin<=e.top)&&(null!=g&&e.top+this.$element.height()>=c-g?"bottom":null!=h&&d<=h&&"top"),this.affixed!==b&&(this.affixed=b,this.unpin="bottom"==b?e.top-d:null,this.$element.removeClass(i).addClass("affix"+(b?"-"+b:"")))}};var d=a.fn.affix;return a.fn.affix=function(b){return this.each(function(){var d=a(this),e=d.data("affix"),f="object"==typeof b&&b;e||d.data("affix",e=new c(this,f)),"string"==typeof b&&e[b]()})},a.fn.affix.Constructor=c,a.fn.affix.defaults={offset:0},a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})}),{init:function(){a(document).ready(function(a){a(".campusnavbar").affix({offset:{top:function(){return a("#page-header").height()}}}),a("body").addClass("hasaffix");var b=a(".campusnavbar").height();b+=10,a('#region-main a[href^="#"]').each(function(){a(a(this).attr("href")).css("padding-top",b+"px").css("margin-top","-"+b+"px")})}),b.debug("Campus affix AMD init")}}});