define(["jquery","core/log"],function(a,b){return a.fn.rwdImageMaps=function(){var b=this,c=function(){b.each(function(){if("undefined"!=typeof a(this).attr("usemap")){var b=this,c=a(b);a("<img />").load(function(){var b="width",d="height",e=c.attr(b),f=c.attr(d);if(!e||!f){var g=new Image;g.src=c.attr("src"),e||(e=g.width),f||(f=g.height)}var h=c.width()/100,i=c.height()/100,j=c.attr("usemap").replace("#",""),k="coords";a('map[name="'+j+'"]').find("area").each(function(){var b=a(this);b.data(k)||b.data(k,b.attr(k));for(var c=b.data(k).split(","),d=new Array(c.length),g=0;g<d.length;++g)g%2===0?d[g]=parseInt(c[g]/e*100*h):d[g]=parseInt(c[g]/f*100*i);b.attr(k,d.toString())})}).attr("src",c.attr("src"))}})};return a(window).resize(c).trigger("resize"),this},{init:function(){b.debug("Campus rwdImageMaps AMD init initialised"),a(document).ready(function(){a("img[usemap]").rwdImageMaps()})}}});